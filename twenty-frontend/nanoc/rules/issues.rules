#!/usr/bin/env ruby

##
# GET /issues/new/
compile '/html/issues/new/index.html.erb' do
  layout "/default.*"
  filter(:erb)
  write("/issues/new/index.html")
end

##
# GET /js/entry-point/new-issue.js
compile("/js/entry-point/new-issue.tsx") do
  filter(:webpack, depend_on: %w[/js/components/ /js/hooks/ /js/types/])
  write("/js/entry-point/new-issue.js")
end

##
# GET /
# GET /issues/
compile("/html/issues/index.html.erb") do
  layout "/default.*"
  filter(:erb)
  write("/issues/index.html")
  write("/index.html")
end

##
# GET /js/entry-point/issues.js
compile("/js/entry-point/issues.tsx") do
  filter(:webpack, depend_on: %w[/js/components /js/hooks/ /js/types/])
  write("/js/entry-point/issues.js")
end

##
# GET /issues/id#id=X
compile("/html/issues/edit/index.html.erb") do
  layout "/default.*"
  filter(:erb)
  write("/issues/edit/index.html")
end

##
# GET /js/entry-point/read-issue.js
compile("/js/entry-point/read-issue.tsx") do
  filter(:webpack, depend_on: %w[/js/components /js/hooks/ /js/types/])
  write("/js/entry-point/read-issue.js")
end
