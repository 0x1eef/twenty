#!/usr/bin/env ruby

##
# GET /issues/new/
compile '/html/issues/new/index.html.erb' do
  layout "/default.*"
  filter(:erb)
  write("/issues/new/index.html")
end

##
# GET /js/main/issue/new.js
compile("/js/main/new-issue.tsx") do
  filter(:webpack, depend_on: %w[/js/components/ /js/hooks/ /js/types/])
  write("/js/main/issue/new.js")
end

##
# GET /
# GET /issues/
compile("/html/issues/index.html.erb") do
  layout "/default.*"
  filter(:erb)
  write("/issues/index.html")
  write("/index.html")
end

##
# GET /js/main/issue/index.js
compile("/js/main/issues.tsx") do
  filter(:webpack, depend_on: %w[/js/components /js/hooks/ /js/types/])
  write("/js/main/issue/index.js")
end

##
# GET /issues/edit#id=X
compile("/html/issues/edit/index.html.erb") do
  layout "/default.*"
  filter(:erb)
  write("/issues/edit/index.html")
end

##
# GET /js/main/issue/edit.js
compile("/js/main/read-issue.tsx") do
  filter(:webpack, depend_on: %w[/js/components /js/hooks/ /js/types/])
  write("/js/main/issue/edit.js")
end
